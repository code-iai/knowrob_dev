Copied from processing-1.5.1
